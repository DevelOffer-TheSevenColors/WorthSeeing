<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

<head th:replace="/fragments/header :: head">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>

<style>

.image-container {
	width: 150px;
	height: 150px;
}

.image-container img {
	width: 100%;
	height: 100%;
}
</style>

<body>
	<div>
		<th:block th:replace="/fragments/header :: TopbarFragment"></th:block>
		
		<div class="row justify-content-center">
			<div class="col-lg-8">
				<div class="contact-form bg-white" style="padding: 30px;">
				
					<form th:action="@{/updateURLThumb}" method="post">
							<div class="image-container">
								<img id="preview-image" th:src="${blockGroup.cImg}" />
							</div>
							<p>썸네일 미리보기</p>
						<table class="insertBoard">
							<tr>
								<td>URL:</td>
 								<td><input type="text" th:value="${blockGroup.linkUrl}" /></td>
							</tr>
							<tr>
								<td th:text="썸네일"></td>
								<td><input type="file" id="input-image"></td>
							</tr>
						</table>
						
						<input type="submit" value="등록하기" class="btn btn-primary py-3 px-4" style="margin-left: 45%">
					</form>
 
    <script>
      function readImage(input) {
    	    // 인풋 태그에 파일이 있는 경우
    	    if(input.files && input.files[0]) {
    	        // 이미지 파일인지 검사 (생략)
    	        // FileReader 인스턴스 생성
    	        const reader = new FileReader()
    	        // 이미지가 로드가 된 경우
    	        reader.onload = e => {
    	            const previewImage = document.getElementById("preview-image")
    	            previewImage.src = e.target.result
    	        }
    	        // reader가 이미지 읽도록 하기
    	        reader.readAsDataURL(input.files[0])
    	    }
    	}
    	// input file에 change 이벤트 부여
    	const inputImage = document.getElementById("input-image")
    	inputImage.addEventListener("change", e => {
    	    readImage(e.target)
    	})
    </script>
    
    
				</div>
			</div>
		</div>
		
		<th:block th:replace="/fragments/footer :: footerFragment"></th:block>
	</div>
	
</body>

</html>