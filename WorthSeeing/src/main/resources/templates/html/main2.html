<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

<head th:replace="/fragments/header :: head">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>

<body>

	<script>
 
	$(document).ready(function() {
		
		// 인기순위 Top 5 이미지 띄우기
		var cImgTopList = encodeURI("[[${listTopcImg}]]");
		top5Img(cImgTopList);
	       
		// 블록 289개 생성
		var cImgList = encodeURI("[[${listcImg}]]");
		createBlock([[${blockGroupSeqList}]], cImgList);
       
		// 오늘 기준으로 이전 날짜 데이터가 있으면 localStorage 리셋
		resetLocalStorage();
		
		var reservationBlockGroupSeqList = [[${reservationBlockGroupSeqList}]]
		
		var betweenDaysList = [[${betweenDaysList}]]
	    var betweenDaysArr = Array.from(betweenDaysList);
		
	    var usingBlockGroupList = [[${usingBlockGroupList}]]
	    var usingBlockGroupArr = Array.from(usingBlockGroupList);
	    
		// 라디오 버튼 클릭 이벤트
		changeRadioBtn(reservationBlockGroupSeqList, betweenDaysArr, usingBlockGroupArr);
		
// 		 $(".reservationBtn").click(function() {
// 			location.href="/reservation/mainReservationCreaditView?blockGroup_seq=" + $(this).parents(".tt").attr("id");
// 		})

	function checkForm() {
	    var suggestPrice = document.fmField.suggestPrice;
	    var autoPrice = document.fmField.autoPrice;
	 	
	    // 암호 입력 유무 체크
	    if(!$('#autoCheck').is(':checked')){
		    if(suggestPrice.value == ''){
		        alert('입찰가격을 입력해주세요!!');
		        suggestPrice.focus();
		        return false;
		    }else if(parseInt(suggestPrice.value) <= parseInt($('#currentPrice').val())){
		        alert('현재 입찰가격보다 큰 금액을 입력해주세요!');
		        suggestPrice.focus();
		        return false;
		    }
	    }else{
	    	if( autoPrice.value == '' ){
		        alert('최대입찰가격을 입력해주세요!');
		        return false;
		    }else if( parseInt($('#currentPrice').val()) >= parseInt(autoPrice.value) ){
		    	 alert('현재 현재입찰가격보다 큰 금액을 입력해주세요!');
		        return false;
		    }else if( parseInt($('#currentMaxPrice').val()) >= parseInt(autoPrice.value) ){
		        alert('현재 최대입찰가격보다 큰 금액을 입력해주세요!');
		        return false;
		    }
	    }
	    
	}
	
	
		
	});
	
	</script>

	<th:block th:replace="/fragments/header :: TopbarFragment"></th:block>

	<!-- Carousel Start -->
	<div class="container-fluid p-0">
		<div id="header-carousel" class="carousel slide" data-ride="carousel">
			<div class="carousel-inner">
				<div class="carousel-item active">
					<img id="topImg1" class="w-100 height700" alt="Image">
					<div
						class="carousel-caption d-flex flex-column align-items-center justify-content-center">
						<div class="p-3 maxwidth900">
							<p id="rank1" class="textsize100"></p>
							<a th:href="@{${blockGroupLink[0]}}"
								class="btn btn-primary py-md-3 px-md-5 mt-2">L I N K</a>
						</div>
					</div>
				</div>
				<div class="carousel-item">
					<img id="topImg2" class="w-100 height700" alt="Image">
					<div
						class="carousel-caption d-flex flex-column align-items-center justify-content-center">
						<div class="p-3 maxwidth900">
							<p id="rank2" class="textsize100"></p>
							<a th:href="@{${blockGroupLink[1]}}"
								class="btn btn-primary py-md-3 px-md-5 mt-2">L I N K</a>
						</div>
					</div>
				</div>
				<div class="carousel-item">
					<img id="topImg3" class="w-100 height700" alt="Image">
					<div
						class="carousel-caption d-flex flex-column align-items-center justify-content-center">
						<div class="p-3 maxwidth900">
							<p id="rank3" class="textsize100"></p>
							<a th:href="@{${blockGroupLink[2]}}"
								class="btn btn-primary py-md-3 px-md-5 mt-2">L I N K</a>
						</div>
					</div>
				</div>
				<div class="carousel-item">
					<img id="topImg4" class="w-100 height700" alt="Image">
					<div
						class="carousel-caption d-flex flex-column align-items-center justify-content-center">
						<div class="p-3 maxwidth900">
							<p id="rank4" class="textsize100"></p>
							<a th:href="@{${blockGroupLink[3]}}"
								class="btn btn-primary py-md-3 px-md-5 mt-2">L I N K</a>
						</div>
					</div>
				</div>

				<div class="carousel-item">
					<img id="topImg5" class="w-100 height700" alt="Image">
					<div
						class="carousel-caption d-flex flex-column align-items-center justify-content-center">
						<div class="p-3 maxwidth900">
							<p id="rank5" class="textsize100"></p>
							<a th:href="@{${blockGroupLink[4]}}"
								class="btn btn-primary py-md-3 px-md-5 mt-2">L I N K</a>
						</div>
					</div>
				</div>

			</div>

			<a class="carousel-control-prev" href="#header-carousel"
				data-slide="prev">
				<div class="btn btn-dark width45height45">
					<span class="carousel-control-prev-icon mb-n2"></span>
				</div>
			</a> <a class="carousel-control-next" href="#header-carousel"
				data-slide="next">
				<div class="btn btn-dark width45height45">
					<span class="carousel-control-next-icon mb-n2"></span>
				</div>
			</a>
		</div>
	</div>
	<!-- Carousel End -->

	<div>
		<div class="topnav">
			<div>
				<label> <input type="radio" name="checkbox"
					checked="checked" id="displayBlock" /> 기존 이미지 표시
				</label>
			</div>
			<div>
				<label> <input type="radio" name="checkbox"
					id="displayBlockNum" value="blockNumber" /> 블록 번호
				</label>
			</div>
			<div>
				<label> <input type="radio" name="checkbox"
					id="displayBetweenDay" value="leftTime" /> 남은 사용 시간
				</label>
			</div>
			<div>
				<label> <input type="radio" name="checkbox"
					id="availableReserv" value="reservAvailable" /> 예약 가능 블록
				</label>
			</div>
		</div>
	</div>



	<div class="col-lg-4 col-md-6 mb-4 pb-2 margintop80">
		<form id="fmField" name="fmField" method="post"
			onsubmit="return checkForm();">
			<div class="blockTest height1700"></div>
		</form>
	</div>

	<th:block th:replace="/fragments/footer :: footerFragment"></th:block>

</body>

</html>