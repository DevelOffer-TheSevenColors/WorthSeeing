<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

<head th:replace="/fragments/header :: head">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- <link rel="stylesheet" th:href="@{/css/button.css}" /> -->
</head>
<style>
.leftcolumn {
	float: left;
}

.topnav {
	overflow: hidden;
	background-color: #333;
}

.topnav button {
	float: left;
	display: block;
	color: #f2f2f2;
	text-align: center;
	padding: 14px 16px;
	text-decoration: none;
}

.topnav button:hover {
	background-color: #ddd;
	color: black;
}

.imgbox {
	width: 150px;
	height: 150px;
}

.imgbox img {
	width: 100%;
	height: 100%;
}

.height1000 {
	height: 850px;
}

.abtn {
	border: none;
	display: block;
	text-align: center;
	cursor: pointer;
	outline: none;
	overflow: hidden;
	position: relative;
	color: #fff;
	font-weight: 700;
	font-size: 15px;
	background-color: #333;
	padding: 15px 50px;
	box-shadow: 0 5px 15px rgba(0, 0, 0, 0.20);
}
</style>
<body>
	<div>
		<th:block th:replace="/fragments/header :: TopbarFragment"></th:block>

		<div class="container-fluid py-5 height1000">
			<div class="container pt-5 pb-3">


				<div class="topnav">
					<button class="abtn" onClick="location.href='/main'">HOME</button>
					<button class="abtn" onclick="location.href='/mypageMain'">My Page</button>
					<button class="abtn" onclick="location.href='/leftOverCoupon'">잔여쿠폰(관리자Page)</button>
					<button class="domainBtn abtn" id="mypageCouponMall">포인트몰</button>
					<button class="domainBtn abtn" id="mypagePointHistory">포인트사용내역</button>
					<button class="domainBtn abtn" id="mypageAuctionHistory">경매내역</button>
					<button class="domainBtn abtn" id="mypagePurchaseHistory">구매내역</button>
				</div>



				<div class="leftcolumn">

					<h2>내 정보</h2>

					<div>
						<span><img src="bb.gif" width="120px" height="120px"></span>
					</div>

					<div>
						<table>
							<tr>
								<th colspan="2"><span
									sec:authentication="principal.users.name"></span></th>
								<td>님</td>
							</tr>
							<tr>
								<th>보유포인트 :</th>
								<td th:text="${users.point}"></td>
								<td>Point</td>
							</tr>
							<tr>
								<th>오늘 출석체크 :</th>
								<td th:text="${users.dailyClickCheck}"></td>
								<td></td>
							</tr>
						</table>
					</div>

					<p>
						<button class="abtn">개인정보 수정</button>
					</p>

				</div>

				<div class="row">
					<div class="menuItem">
							<h2>My Page</h2>
						<div>
							<br />
							<form th:action="@{/writeURLThumb}" method="post">
								<table border="1"
									th:each="userBlockGroup, state : ${BlockGroupUserId}">
									<tr align="center">
										<th scope="col">보유한 블럭그룹</th>
										<th scope="col">블록 번호 :</th>
										<th scope="col">전체 방문자 수 :</th>
										<th scope="col">종료 일자 :</th>
										<th scope="col">블록 수정</th>
									</tr>
									<tr align="center">
										<td class="imgbox"><img th:src="${userBlockGroup.cImg}" /></td>
										<td th:text="${userBlockGroup.blockGroup_seq}">
										<input type="hidden" name="blockGroup_seq"
											th:value="${userBlockGroup.blockGroup_seq}"></td>
										<td th:text="${userBlockGroup.clickCnt}"></td>
										<td th:text="${userBlockGroup.endDate}"></td>
										<td><input type="submit" value="수정하기"></td>
									</tr>
								</table>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>

		<th:block th:replace="/fragments/footer :: footerFragment"></th:block>

		<!-- 	MyPage 우측화면 동적변환 -->
		<script>
			function movePage(domain) {
				var ajaxOption = {
					url : "/" + domain,
					async : true,
					type : "GET",
					dataType : "html",
					cache : false,
				};

				$.ajax(ajaxOption).done(function(data) {
					// rightcolumn 영역 삭제
					$('.menuItem').children().remove();
					// rightcolumn 영역 교체
					$('.menuItem').html(data);
				});
			}

			$(".domainBtn").click(function() {
				idDomain = $(this).attr('id');
				movePage(idDomain);
			})
		</script>
	</div>
</body>
</html>