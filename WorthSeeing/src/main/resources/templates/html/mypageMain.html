<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
<meta charset="utf-8">
<link rel="stylesheet" type="text/css" href="/css/mypage.css">
</head>
<body>

	<div class="header">
		<h1>My Page</h1>
	</div>

	<div class="topnav">
		<a href="/mypageMain">My Page</a> <a href="/">Main Page</a> 
		<a href="#">쓸만한거있나?</a>
	</div>
	<div class="leftcolumn">
		<div class="card">
			<h2>내 정보</h2>
			<div class="fakeimg" style="height: 200px;">
				<span><img src="bb.gif" width="120px" height="120px"></span>
			</div>
			<div>
				<table class="mypagetable">
				<tr>
						<th scope="row">닉네임 : </th>
						<td th:text="${users.nickName}"></td>
						<td>님</td>
					</tr>
					<tr>
						<th scope="row">보유포인트 : </th>
						<td th:text="${users.point}"></td>
						<td>Point</td>
					</tr>
					<tr>
						<th scope="row">오늘 활동횟수 : </th>
						<td th:text="${users.dailyClick}"></td>
						<td>Click</td>
					</tr>
				</table>
			</div>
			<p>
				<button onclick="" type="button">개인정보 수정</button>
			</p>


		</div>
		<div class="card">
			<hr>
			<div class="fakeimg">
				<a href="/login/logoutProc">로그아웃</a>
			</div>
			<hr>

			<div class="fakeimg">포인트 몰</div>
			<button class="domainBtn" id="mypageCouponMall">포인트몰</button>
			<hr>
			<div class="fakeimg">포인트 사용내역</div>
			<button class="domainBtn" id="mypagePointHistory">포인트 사용내역</button>
			<hr>
			<div class="fakeimg">경매내역</div>
			<button class="domainBtn" id="mypageAuctionHistory">경매내역</button>
			<hr>
			<div class="fakeimg">구매내역</div>
			<button class="domainBtn" id="mypagePurchaseHistory">구매내역</button>

		</div>
		<div class="card"></div>
	</div>

	<div class="row">
		<div class="rightcolumn">
			<div class="card">
				<h2>포인트 몰</h2>
			</div>
			<div>
				<button onclick="" type="button">현재 이용중인 서비스 현황</button>
				<button onclick="" type="button">경매 예약 현황</button>
				<br />
					<div th:if="">
				<table border="1" th:each="blockGroup, state : ${BGL}">
					<tr align="center">
						<th scope="col">보유한 블럭그룹(Img)</th>
						<th scope="col">블록 번호 : </th>
						<th scope="col">전체 방문자 수 : </th>
						<th scope="col">종료 일자 : </th>
						<th scope="col">ID : </th>
					</tr>
					<tr align="center">
						<td>이미지뷰</td>
						<td th:text="${blockGroup.blockGroup_seq}"></td>
						<td th:text="${blockGroup.clickCnt}"></td>
						<td th:text="${blockGroup.endDate}"></td>
						<td th:text="${blockGroup.endDate}"></td>
					</tr>
				</table>
					</div>
<!-- 					<div th:text="${blockGroup.users.userId == users.userId}"></div> -->
<!-- 					<div th:text="${users.userId}"></div> -->

<!-- 							<th:block th:if="${blockGroup.userId != users.userId}"> -->
<!-- 								<div>불가능 합니다.</div> -->
<!-- 							</th:block> -->


			</div>
		</div>
	</div>

<!-- 	MyPage 우측화면 동적변환 -->
	<script src="https://code.jquery.com/jquery-3.4.1.js"></script>
	<script>
		function movePage(domain) {
			var ajaxOption = {
				url : "/" + domain,
				async : true,
				type : "GET",
				dataType : "html",
				cache : false,
			};

			$.ajax(ajaxOption).done(function(data) {
				// rightcolumn 영역 삭제
				$('.rightcolumn').children().remove();
				// rightcolumn 영역 교체
				$('.rightcolumn').html(data);
			});
		}

		$(".domainBtn").click(function() {
			idDomain = $(this).attr('id');
			movePage(idDomain);
		})

	</script>


</body>
</html>